infixr 1 ->
infixl 1 +
constructor Type
constructor Int
constructor JSAction
constructor JSCont
constructor (->)
constructor Unknown

(+) = \x y -> [|x + y|] : Int -> Int -> Int

constructor Int : Type
constructor (->) : Type -> Type -> Type
constructor JSAction : Type -> Type
constructor JSCont : forall a. ((a -> Unknown) -> Unknown) -> JSAction a

registry Program m = forall a b. m a -> (a -> m b) -> m b
register Program (JSAction x) = \m k -> JSCont (\cont -> case m of JSCont f -> f (\a -> case (k a) of JSCont c -> c cont))

main = Program
